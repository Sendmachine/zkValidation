var Validation=angular.module("Validation",[]);Validation.factory("validation",function(n,t,a,r){function i(){this.baseUrl=r.validationUrl+"/"}return i.prototype={runAfterFn:void 0,rules:void 0,setBaseUrl:function(n){this.baseUrl=n},getRules:function(t){var a=this;return n.get(a.baseUrl+t,{cache:!0}).then(function(n){a.rules=n.data.validation},function(){throw new Error("Validation: could not load rule <"+t+">")}).then(function(){return a.runAfterFn?a.runAfterFn():null})},runAfter:function(n){this.runAfterFn=n},runValidation:function(n,r,i){var e={isValid:void 0,errorMsg:""},u=this.rules,l=t.lang;if(!u||!u[n])throw new Error("Validation: no rule found for field name <"+n+">");return $.each(u[n],function(n,t){return e.isValid="matches"==t.msg?a[t.msg](r,i[t.param].$modelValue||i[t.param]):t.param?a[t.msg](r,t.param):a[t.msg](r),!e.isValid&&l.validation[t.msg]&&(e.errorMsg="matches"==t.msg?l.validation[t.msg].replace("%s",l[t.param]):t.param?l.validation[t.msg].replace("%s",t.param):l.validation[t.msg]),e.isValid}),e}},function(){return new i}}),Validation.service("validationFn",function(){return{required:function(n){return n?!0:!1},min_length:function(n,t){return n?n.length>=t:!1},max_length:function(n,t){return n?n.length<=t:!0},exact_length:function(n,t){return n&&n.length==t},matches:function(n,t){return n==t},numeric:function(n){return n?+n?!0:!1:!0},is_natural:function(n){return+n>=0},greater_than:function(n,t){return+n>+t},less_than:function(n,t){return+t>+n},alpha_dash:function(n){return n?/^[\w\-]+$/i.test(n):!0},alpha:function(n){return n?/^([a-z])+$/i.test(n):!0},alpha_numeric:function(n){return n?/^[a-z0-9]+$/i.test(n):!0},valid_email:function(n){return n?/^([\w\+\-]+)(\.[\w\+\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/i.test(n):!0},callback_domain_is_valid:function(n){return n?/^([a-z0-9]+)([\-\.]{1}[a-z0-9]+)*\.[a-z]+$/i.test(n):!0},callback_url_is_valid:function(n){return n?/^(http(s)?\:\/\/)([\w]+)([\-\.]{1}[\w]+)*\.[a-z]+([\w][\w\-\.]*[\/]?)+$/i.test(n):!0},callback_cron_jobs_selected_entire_time_is_valid:function(n){return n?/^(([\d\*\.\/]+),){4}([\d\*\.\/]+)$/.test(n):!0},callback_has_symbols:function(n){return n?/[\!\@\#\$\%\^\&\*\(\)\:\"\;\'\{\}\[\]\,\.\/<\>\?\`\~\\]/.test(n):!0},callback_has_capitals:function(n){return n?/[A-Z]/.test(n):!0},callback_has_numbers:function(n){return n?/[0-9]/.test(n):!0},callback_alpha_dash_dot:function(n){return n?/^[\w\-\.]+$/i.test(n):!0},callback_alpha_space:function(n){return n?/^([a-z\s])+$/i.test(n):!0},callback_valid_url_cron_jobs:function(n){return n?/^([a-z])([a-z0-9\/\_\-\?\=\&\.])*$/i.test(n):!0},callback_valid_path:function(n){return n?/^([\w][\w\-\.]*[\/]?)*$/.test(n):!0},callback_alpha_numeric_space:function(n){return n?/^[a-z0-9\s]+$/i.test(n):!0}}});
Validation.directive("validationRunAfter",function(){return{require:["form","validationRule"],link:function(i,t,n,r){var e=r[1],a=i[n.validationRunAfter];e.instance.runAfter(a)}}}),Validation.directive("validationSubmit",function(){return{require:["^form"],link:function(i,t,n,r){function e(){r[0].$submitInProgress=!0,i.$watch(l,function(i){if(!i)throw new Error("Validation: validation-submit should be given a $resource or a $http instance that contains a promise");var t=i.$promise||i;if(!t||!t.then)throw new Error("Validation: validation-submit instance should contain a promise");u?t.finally(a):t.catch(a)})}function a(){r[0].$submitInProgress=!1}var o=n.validationSubmit.split(","),l=o[0],u=o[1];a(),t.bind("click",e)}}}),Validation.directive("validationRule",function(){return{require:["form"],controller:function(i,t,n,r){var e=n.validationRule;if(i.errorMsg={},!e)throw new Error("Validation: validation rule not set");if(!n.name)throw new Error("Validation: name attribute not set on form");var a=r();return{instance:a,getRules:a.getRules(e)}}}}),Validation.directive("validate",function(i,t){return{require:["^validationRule","ngModel","^form"],link:function(n,r,e,a){function o(i){var n=f.instance.runValidation(c,i,m);return v.$setValidity(c,n.isValid),t.debug("Validation:",c,i,n.isValid),n}function l(i){var t=o(i);return n.errorMsg[c]=t.errorMsg,t.isValid?(r.tooltip("hide"),d=!0):d&&(r.tooltip("show"),d=!1),r.toggleClass("validation-error",!t.isValid),t.isValid?i:void 0}function u(i){o(i);return i}function s(){v.$setViewValue(v.$viewValue)}var d,c=e.name,f=a[0],v=a[1],m=a[2];if(!c)throw new Error("Validation: name attribute not set on input");v.$setValidity(c,!1);var V=i(angular.element('<div ng-bind="errorMsg.'+c+'"></div>'))(n);r.tooltip({title:V,html:!0,placement:e.validate||"right"}),f.getRules.then(function(){v.$isEmpty=function(){},v.$parsers=[l],v.$formatters=[u],r.on("mouseenter focus",function(){n.$apply(s)})})}}});
Validation.value("appConfig",{validationUrl:"."});